%% Identification
%% ----------------------------------------------------------------------

\NeedsTeXFormat{LaTeX2e}[2018/04/01]
\ProvidesPackage{probl-base}[2018/10/04 v 0.9 Part of probl-bundle]

%% Load packages required by all documents
%% ----------------------------------------------------------------------

\RequirePackage{etoolbox}

\RequirePackage[full]{textcomp}

% Internationalization
\providebool{langES}
\providebool{langEN}

\RequirePackage[spanish, es-noindentfirst, english]{babel}
\AtBeginDocument{%
  \ifbool{langES}{%
    \selectlanguage{spanish}}{%
    \selectlanguage{english}}}
\AddBabelHook{french}{afterextras}{\frenchspacing}
\addto\shorthandsspanish{\spanishdeactivate{"<>}}%
\RequirePackage[english, spanish]{translator}

% Fonts
\RequirePackage[T1]{fontenc}
\RequirePackage{kpfonts}

% Symbols
\RequirePackage{marvosym}
\RequirePackage[nointegrals]{wasysym}

% Quotes
\RequirePackage[autostyle=true,spanish=spanish,english=american]{csquotes}

% Better left justification
\RequirePackage{ragged2e}

% Underlined text
\RequirePackage[normalem]{ulem}

% Microtypography
\RequirePackage{microtype}

% Parskip
\RequirePackage[skip=0pt plus 2pt, parfill]{parskip}

%% Units
%% ----------------------------------------------------------------------
\RequirePackage{siunitx}

\DeclareSIUnit{\@EUR}{\text{\texteuro}}
\DeclareSIUnit{\@UNIT}{\text{u}}

\ifbool{langES}{%
  \sisetup{%
    exponent-product=\ensuremath{times},%
    output-decimal-marker={,},%
    group-digits=integer,%
    group-minimum-digits=4,%
    group-separator=.,%
    per-mode=symbol,%
    inter-unit-product=\,%
  }%
}{%
  \sisetup{%
    exponent-product=\ensuremath{times},%
    output-decimal-marker=.,%
    group-digits=integer,%
    group-minimum-digits=4,%
    group-separator={,},%
    per-mode=symbol,%
    inter-unit-product=\,%
  }
}
\newcommand*{\money}[1]{\SI{#1}{\@EUR}}
\newcommand*{\price}[2][@UNIT]{\SI{#2}{\@EUR\per\csname #1\endcsname}}
\newcommand*{\wage}[2][hour]{\SI{#2}{\@EUR\per\csname #1\endcsname}}
\newcommand*{\units}[2][@UNIT]{\SI{#2}{\csname #1\endcsname}}
\newcommand*{\hours}[1]{\units[hour]{#1}}

%% Common colors
%% ----------------------------------------------------------------------
% Load xcolor
\RequirePackage[svgnames]{xcolor}


% Solarized colors: https://ethanschoonover.com/solarized/
\definecolor{solarizedBase03}{HTML}{002b36}
\definecolor{solarizedBase02}{HTML}{073642}
\definecolor{solarizedBase01}{HTML}{586e75}
\definecolor{solarizedBase00}{HTML}{657b83}
\definecolor{solarizedBase0}{HTML}{839496}
\definecolor{solarizedBase1}{HTML}{93a1a1}
\definecolor{solarizedBase2}{HTML}{eee8d5}
\definecolor{solarizedBase3}{HTML}{fdf6e3}
\definecolor{solarizedYellow}{HTML}{b58900}
\definecolor{solarizedOrange}{HTML}{cb4b16}
\definecolor{solarizedRed}{HTML}{dc322f}
\definecolor{solarizedMagenta}{HTML}{d33682}
\definecolor{solarizedViolet}{HTML}{6c71c4}
\definecolor{solarizedBlue}{HTML}{268bd2}
\definecolor{solarizedCyan}{HTML}{2aa198}
\definecolor{solarizedGreen}{HTML}{859900}


% Document colors
\definecolor{titleRed}{HTML}{cb3c5f}

\colorlet{MainText}{Black}
\colorlet{Title}{titleRed!45!Black}
\colorlet{Section}{titleRed!55!Black}
\colorlet{Subsection}{titleRed!65!Black}
\colorlet{Paragraph}{DarkGreen!55!Black}
\colorlet{Subparagraph}{DarkGreen!70!Black}


%% Math
%% ----------------------------------------------------------------------
\RequirePackage{latexsym}
\RequirePackage{amssymb}
\RequirePackage{mathtools}
\mathtoolsset{mathic}


%% Like amsmath \text command, but insert a space, a quad or a qquad
%% before the text.
\newcommand*{\@text}[2]{\text{#1#2}}
\newcommand*{\stext}[1]{\@text{\ }{#1}}
\newcommand*{\qtext}[1]{\@text{$\quad$}{#1}}
\newcommand*{\qqtext}[1]{\@text{$\qquad$}{#1}}


\newcommand*{\diff}{\mathop{}\!\mathrm{d}}
\newcommand*{\incr}{\mathop{}\!\Delta}
\newcommand*{\incrpct}{\mathop{}\!\Delta\%}
\newcommand*{\iratio}[2]{\frac{\incr #1}{\incr #2}}
\newcommand*{\ipctratio}[2]{\frac{\incrpct #1}{\incrpct #2}}

\DeclarePairedDelimiter\Math@abs{\lvert}{\rvert}
\newcommand*{\abs}[1]{\Math@abs*{#1}}

\DeclarePairedDelimiter\Math@eval{.}{\rvert}
\newcommand*{\eval}[2]{\Math@eval*{#1}_{#2}}
